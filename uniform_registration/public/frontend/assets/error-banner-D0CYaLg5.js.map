{"version":3,"file":"error-banner-D0CYaLg5.js","sources":["../../../../frontend/node_modules/@radix-ui/react-label/dist/index.mjs","../../../../frontend/src/components/ui/label.tsx","../../../../frontend/src/components/ui/input.tsx","../../../../frontend/src/components/state/error-banner.tsx"],"sourcesContent":["import $7V4JZ$babelruntimehelpersesmextends from \"@babel/runtime/helpers/esm/extends\";\nimport {forwardRef as $7V4JZ$forwardRef, createElement as $7V4JZ$createElement} from \"react\";\nimport {Primitive as $7V4JZ$Primitive} from \"@radix-ui/react-primitive\";\n\n\n\n\n/* -------------------------------------------------------------------------------------------------\n * Label\n * -----------------------------------------------------------------------------------------------*/ const $b73a6c6685e72184$var$NAME = 'Label';\nconst $b73a6c6685e72184$export$b04be29aa201d4f5 = /*#__PURE__*/ $7V4JZ$forwardRef((props, forwardedRef)=>{\n    return /*#__PURE__*/ $7V4JZ$createElement($7V4JZ$Primitive.label, $7V4JZ$babelruntimehelpersesmextends({}, props, {\n        ref: forwardedRef,\n        onMouseDown: (event)=>{\n            var _props$onMouseDown;\n            (_props$onMouseDown = props.onMouseDown) === null || _props$onMouseDown === void 0 || _props$onMouseDown.call(props, event); // prevent text selection when double clicking label\n            if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n        }\n    }));\n});\n/*#__PURE__*/ Object.assign($b73a6c6685e72184$export$b04be29aa201d4f5, {\n    displayName: $b73a6c6685e72184$var$NAME\n});\n/* -----------------------------------------------------------------------------------------------*/ const $b73a6c6685e72184$export$be92b6f5f03c0fe9 = $b73a6c6685e72184$export$b04be29aa201d4f5;\n\n\n\n\nexport {$b73a6c6685e72184$export$b04be29aa201d4f5 as Label, $b73a6c6685e72184$export$be92b6f5f03c0fe9 as Root};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","import { FrappeError } from \"frappe-react-sdk\";\nimport { useMemo } from \"react\";\nimport { Alert, AlertDescription, AlertTitle } from \"../ui/alert\";\nimport { useTranslation } from \"react-i18next\";\nimport { AlertCircle } from \"lucide-react\";\n\ninterface ParsedErrorMessage {\n  message: string;\n  title?: string;\n  indicator?: string;\n}\n\nexport const ErrorBanner = ({ error }: { error: FrappeError }) => {\n  const { t } = useTranslation();\n\n  const messages = useMemo(() => {\n    if (!error) return [];\n    let eMessages: ParsedErrorMessage[] = error?._server_messages\n      ? JSON.parse(error?._server_messages)\n      : [];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    eMessages = eMessages.map((m: any) => {\n      try {\n        return JSON.parse(m);\n      } catch (e) {\n        return m;\n      }\n    });\n\n    if (eMessages.length === 0) {\n      // Get the message from the exception by removing the exc_type\n      const indexOfFirstColon = error?.exception?.indexOf(\":\");\n      if (indexOfFirstColon) {\n        const exception = error?.exception?.slice(indexOfFirstColon + 1);\n        if (exception) {\n          eMessages = [\n            {\n              message: exception,\n              title: \"Error\",\n            },\n          ];\n        }\n      }\n\n      if (eMessages.length === 0) {\n        eMessages = [\n          {\n            message: error?.message,\n            title: \"Error\",\n            indicator: \"red\",\n          },\n        ];\n      }\n    }\n    return eMessages;\n  }, [error]);\n\n  if (messages.length === 0 || !error) return null;\n\n  return (\n    <Alert className=\"my-2\" variant=\"destructive\">\n      <AlertCircle className=\"h-4 w-4\" />\n      <AlertTitle>Error</AlertTitle>\n      <AlertDescription>\n        {messages.map((m, i) => (\n          <div key={i}>{t(m.message)}</div>\n        ))}\n      </AlertDescription>\n    </Alert>\n  );\n};\n"],"names":["$b73a6c6685e72184$export$b04be29aa201d4f5","$7V4JZ$forwardRef","props","forwardedRef","$7V4JZ$createElement","$7V4JZ$Primitive","$7V4JZ$babelruntimehelpersesmextends","event","_props$onMouseDown","$b73a6c6685e72184$export$be92b6f5f03c0fe9","labelVariants","cva","Label","React.forwardRef","_a","ref","_b","className","__objRest","jsx","LabelPrimitive.Root","__spreadValues","cn","Input","type","ErrorBanner","error","t","useTranslation","messages","useMemo","eMessages","m","e","indexOfFirstColon","exception","jsxs","Alert","AlertCircle","AlertTitle","AlertDescription","i"],"mappings":"i8BAUA,MAAMA,EAA0DC,EAAiB,WAAC,CAACC,EAAOC,IACjEC,EAAAA,cAAqBC,EAAiB,MAAOC,EAAqC,CAAA,EAAIJ,EAAO,CAC9G,IAAKC,EACL,YAAcI,GAAQ,CAClB,IAAIC,GACHA,EAAqBN,EAAM,eAAiB,MAAQM,IAAuB,QAAUA,EAAmB,KAAKN,EAAOK,CAAK,EACtH,CAACA,EAAM,kBAAoBA,EAAM,OAAS,GAAGA,EAAM,gBAC1D,CACJ,CAAA,CAAC,CACL,EAI0GE,EAA4CT,ECjBjJU,EAAgBC,EACpB,4FACF,EAEMC,EAAQC,EAIZ,WAAA,CAACC,EAAyBC,KAAzB,IAAAC,EAAAF,EAAE,WAAAG,GAAFD,EAAgBd,EAAAgB,EAAhBF,EAAgB,CAAd,cACHG,OAAAA,EAAA,IAACC,EAAAC,EAAA,CACC,IAAAN,EACA,UAAWO,EAAGZ,EAAc,EAAGO,CAAS,GACpCf,EACN,EACD,EACDU,EAAM,YAAcQ,EAAoB,YCdxC,MAAMG,EAAQV,EAAM,WAClB,CAACC,EAA+BC,IAAQ,CAAvC,IAAAC,EAAAF,EAAE,WAAAG,EAAW,KAAAO,GAAbR,EAAsBd,EAAAgB,EAAtBF,EAAsB,CAApB,YAAW,SAEV,OAAAG,EAAA,IAAC,QAAAE,EAAA,CACC,KAAAG,EACA,UAAWF,EACT,wUACAL,CACF,EACA,IAAAF,GACIb,EAAA,CAGV,CACF,EACAqB,EAAM,YAAc,QCVb,MAAME,EAAc,CAAC,CAAE,MAAAC,KAAoC,CAC1D,KAAA,CAAE,EAAAC,GAAMC,IAERC,EAAWC,EAAAA,QAAQ,IAAM,SAC7B,GAAI,CAACJ,EAAO,MAAO,GACf,IAAAK,EAAkCL,GAAA,MAAAA,EAAO,iBACzC,KAAK,MAAMA,GAAA,YAAAA,EAAO,gBAAgB,EAClC,GAUA,GARQK,EAAAA,EAAU,IAAKC,GAAW,CAChC,GAAA,CACK,OAAA,KAAK,MAAMA,CAAC,QACZC,EAAG,CACH,OAAAD,CACT,CAAA,CACD,EAEGD,EAAU,SAAW,EAAG,CAE1B,MAAMG,GAAoBpB,EAAAY,GAAA,YAAAA,EAAO,YAAP,YAAAZ,EAAkB,QAAQ,KACpD,GAAIoB,EAAmB,CACrB,MAAMC,GAAYnB,EAAAU,GAAA,YAAAA,EAAO,YAAP,YAAAV,EAAkB,MAAMkB,EAAoB,GAC1DC,IACUJ,EAAA,CACV,CACE,QAASI,EACT,MAAO,OACT,CAAA,EAGN,CAEIJ,EAAU,SAAW,IACXA,EAAA,CACV,CACE,QAASL,GAAA,YAAAA,EAAO,QAChB,MAAO,QACP,UAAW,KACb,CAAA,EAGN,CACO,OAAAK,CAAA,EACN,CAACL,CAAK,CAAC,EAEN,OAAAG,EAAS,SAAW,GAAK,CAACH,EAAc,KAGzCU,EAAAA,KAAAC,EAAA,CAAM,UAAU,OAAO,QAAQ,cAC9B,SAAA,CAAClB,EAAAA,IAAAmB,EAAA,CAAY,UAAU,SAAU,CAAA,EACjCnB,EAAAA,IAACoB,GAAW,SAAK,OAAA,CAAA,EAChBpB,EAAA,IAAAqB,EAAA,CACE,SAASX,EAAA,IAAI,CAACG,EAAGS,IACftB,EAAAA,IAAA,MAAA,CAAa,WAAEa,EAAE,OAAO,GAAfS,CAAiB,CAC5B,EACH,CACF,CAAA,CAAA,CAEJ","x_google_ignoreList":[0]}